<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ฟอร์มแบบสอบถามสุขภาพ</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #97bae2;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
    }
    .form-container {
        background-color: #fff;
        padding: 25px 30px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        width: 400px;
    }
    h2 {
        text-align: center;
        color: #333;
        margin-bottom: 20px;
    }
    label {
        display: block;
        margin-top: 10px;
        font-weight: bold;
    }
    input[type="text"], input[type="number"], input[type="date"], select {
        width: 100%;
        padding: 8px;
        margin-top: 5px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    .radio-group, .checkbox-group {
        display: flex;
        gap: 15px;
        margin-top: 5px;
    }
    .radio-group label, .checkbox-group label {
        display: flex;
        align-items: center;
        gap: 5px;
        font-weight: normal;
    }
    button {
        width: 100%;
        padding: 10px;
        margin-top: 20px;
        background-color: #544bd8;
        color: white;
        font-size: 16px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    button:hover {
        background-color: #45a049;
    }

    /* Modal */
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0; top: 0;
        width: 100%; height: 100%;
        background-color: rgba(0,0,0,0.5);
        justify-content: center;
        align-items: center;
    }
    .modal-content {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
        width: 300px;
    }
</style>
</head>
<body>

<div class="form-container">
    <h2>ฟอร์มแบบสอบถามสุขภาพ</h2>
    <form id="healthForm">
        <label>ชื่อ - นามสกุล</label>
        <input type="text" name="fullname" placeholder="กรอกชื่อ-นามสกุล">

        <label>อายุ</label>
        <input type="number" name="age" placeholder="กรอกอายุ" required>

        <label>เพศ</label>
        <div class="radio-group">
            <label><input type="radio" name="gender" value="ชาย"> ชาย</label>
            <label><input type="radio" name="gender" value="หญิง"> หญิง</label>
            <label><input type="radio" name="gender" value="อื่นๆ"> อื่นๆ</label>
        </div>

        <label>วันเดือนปีเกิด</label>
        <input type="date" name="birthday">

        <label>น้ำหนัก (กิโลกรัม)</label>
        <input type="number" name="weight" placeholder="กรอกน้ำหนัก" required>

        <label>ส่วนสูง (เซนติเมตร)</label>
        <input type="number" name="height" placeholder="กรอกส่วนสูง" required>

        <label>โรคประจำตัว</label>
        <div class="checkbox-group">
            <label><input type="checkbox" name="disease" value="ไม่มีโรคประจำตัว"> ไม่มีโรคประจำตัว</label>
            <label><input type="checkbox" name="disease" value="อื่นๆ" id="otherCheckbox"> อื่นๆ</label>
        </div>

        <div id="otherDiseaseInput" style="display:none; margin-top: 10px;">
            <input type="text" name="other_disease" placeholder="โปรดระบุโรคประจำตัวอื่นๆ">
        </div>

        <button type="submit">ส่งข้อมูล</button>
    </form>
</div>

<!-- Modal แสดงผล BMI -->
<div id="resultModal" class="modal">
    <div class="modal-content">
        <h3>ผลการประเมิน</h3>
        <p id="bmiResult"></p>
        <button onclick="closeModal()">ปิด</button>
    </div>
</div>

<script>
    // แสดง/ซ่อน input โรคอื่นๆ
    const otherCheckbox = document.getElementById('otherCheckbox');
    const otherDiseaseInput = document.getElementById('otherDiseaseInput');
    otherCheckbox.addEventListener('change', function () {
        otherDiseaseInput.style.display = this.checked ? 'block' : 'none';
    });

    // ฟังก์ชันเปิด/ปิด modal
    function closeModal() {
        document.getElementById('resultModal').style.display = 'none';
    }

    // ฟอร์ม submit
    document.getElementById('healthForm').addEventListener('submit', function (e) {
        e.preventDefault();

        const age = parseInt(this.age.value);
        const weight = parseFloat(this.weight.value);
        const height = parseFloat(this.height.value);

        if (isNaN(age) || age < 15 || age > 60) {
            alert("กรุณากรอกอายุระหว่าง 15 ถึง 60 ปี");
            return;
        }

        if (isNaN(weight) || weight <= 0 || isNaN(height) || height <= 0) {
            alert("กรุณากรอกน้ำหนักและส่วนสูงให้ถูกต้อง");
            return;
        }

        const heightM = height / 100;
        const bmi = weight / (heightM * heightM);
        let category = "";

        if (bmi < 18.5) {
            category = "น้ำหนักน้อย";
        } else if (bmi < 24.9) {
            category = "ปกติ";
        } else if (bmi < 29.9) {
            category = "น้ำหนักเกิน";
        } else {
            category = "อ้วน";
        }

        document.getElementById("bmiResult").textContent = `ค่า BMI ของคุณคือ ${bmi.toFixed(2)} (${category})`;
        document.getElementById("resultModal").style.display = "flex";
    });
</script>

</body>
</html>
